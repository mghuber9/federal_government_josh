<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Unit 3 — Vocab Lightning (by Chapter)</title>
<style>
  :root{
    --bg:#0b1220; --panel:#101a2c; --ink:#e6edf3; --muted:#9fb0c6; --accent:#4fd1c5;
    --ok:#22c55e; --bad:#ef4444; --tile:#0f2034; --tile-border:rgba(255,255,255,.12);
  }
  *{box-sizing:border-box}
  body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial; color:var(--ink); background:radial-gradient(1100px 700px at 20% -10%, #13233d 0%, var(--bg) 60%);} 
  .wrap{max-width:980px; margin:0 auto; padding:24px}
  h1{margin:0 0 6px; font-size:clamp(22px,3vw,32px)}
  p,label{color:var(--muted)}
  .card{background:var(--panel); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:18px; box-shadow:0 6px 18px rgba(0,0,0,.25)}
  .grid{display:grid; gap:12px}
  .grid-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  select,button{appearance:none; border:1px solid rgba(255,255,255,.12); background:#0f2034; color:var(--ink); padding:10px 12px; border-radius:12px; font-size:16px}
  button{cursor:pointer; background:linear-gradient(135deg,#1f3a5b,#17314f); border:1px solid rgba(79,209,197,.45)}
  button:hover{filter:brightness(1.08)}
  .hidden{display:none}
  .pill{display:inline-block; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.12); background:#10243a; color:#a7c6ff; font-size:12px}
  .hud{display:flex; gap:8px; align-items:center; justify-content:space-between; flex-wrap:wrap}
  .qtext{font-size:clamp(18px,2.2vw,22px); font-weight:700; line-height:1.35}
  .choices{display:grid; gap:12px; grid-template-columns:repeat(2,minmax(0,1fr)); margin-top:12px}
  @media (max-width: 820px){ .choices{grid-template-columns:1fr;} }
  .tile{min-height:110px; padding:14px; border-radius:14px; border:1px solid var(--tile-border); background:var(--tile); cursor:pointer; display:flex; align-items:center}
  .tile .inner{font-size:clamp(16px,2.1vw,18px); line-height:1.35}
  .tile.correct{background:#0e2b22; border-color:#1f8a67}
  .tile.wrong{background:#3a0f16; border-color:#ff6b6b}
  .muted{color:var(--muted)}
  .sep{height:1px; background:rgba(255,255,255,.08); margin:12px 0}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Lightning Round — Unit 3 Vocabulary</h1>
    <p class="muted">Auto-advance on answer. Stopwatch runs during the round. End screen shows only missed items with the correct answer.</p>

    <!-- START -->
    <section id="start" class="card grid">
      <div class="grid grid-2">
        <div>
          <label for="section">Chapter</label>
          <select id="section">
            <option value="ch12">Ch. 12 (all)</option>
            <option value="ch13">Ch. 13 (all)</option>
            <option value="ch15">Ch. 15 (all)</option>
            <option value="ch16">Ch. 16 (all)</option>
            <option value="ch17">Ch. 17 (all)</option>
            <option value="unit3" selected>Unit 3 (random 50)</option>
          </select>
        </div>
        <div>
          <label for="mode">Play mode</label>
          <select id="mode">
            <option value="t2d">Term → Definition</option>
            <option value="d2t">Definition → Term</option>
          </select>
        </div>
        <div>
          <label for="order">Order</label>
          <select id="order">
            <option value="shuf" selected>Shuffle</option>
            <option value="seq">In order</option>
          </select>
        </div>
      </div>
      <div class="hud">
        <button id="begin">Start Round</button>
        <span class="pill" id="hint">Answers are shuffled per question.</span>
      </div>
    </section>

    <!-- QUIZ -->
    <section id="quiz" class="card hidden">
      <div class="hud">
        <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap">
          <span class="pill" id="setTag">Set</span>
          <span class="pill" id="modeTag">Mode</span>
          <span class="pill" id="progress">Q 1 / N</span>
        </div>
        <div style="display:flex; gap:8px; align-items:center">
          <span class="pill" id="timer">00:00</span>
          <span class="pill" id="best">Best: —</span>
        </div>
      </div>
      <div class="sep"></div>
      <div id="prompt" class="qtext"></div>
      <div id="choices" class="choices"></div>
    </section>

    <!-- RESULT -->
    <section id="result" class="card hidden">
      <h2 style="margin:0 0 6px">Round Complete</h2>
      <div class="hud" style="margin-bottom:6px">
        <span class="pill" id="scoreline">Score</span>
        <span class="pill" id="timeline">Time</span>
        <span class="pill" id="bestline">Best</span>
      </div>
      <div class="sep"></div>
      <div id="review"></div>
      <div class="hud">
        <button id="retry">New Round</button>
        <button id="retryMissed">Retry Missed Only</button>
        <button id="restart">Back to Start</button>
      </div>
    </section>
  </div>

<script>
// ---------- Helpers ----------
function shuffle(a){ const r=[...a]; for(let i=r.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [r[i],r[j]]=[r[j],r[i]]; } return r; }
function fmtTime(s){ const m=Math.floor(s/60).toString().padStart(2,'0'); const ss=(s%60).toString().padStart(2,'0'); return `${m}:${ss}`; }
function setBest(key, seconds){ const prev = Number(localStorage.getItem(key)||Infinity); if(seconds < prev){ localStorage.setItem(key, String(seconds)); } }
function getBest(key){ const v = localStorage.getItem(key); return v? fmtTime(Number(v)) : '—'; }

// ---------- Vocab Bank (50 total) ----------
const BANK = [
  // ch12
  {chapter:12, set:'ch12', term:'Requirements to be president', def:'At least 35 years old, a natural-born U.S. citizen, and a resident of the United States for at least 14 years.'},
  {chapter:12, set:'ch12', term:'Whig theory', def:'A 19th-century “weak presidency” view: the president primarily administers and executes Congress’s will, not lead policy.'},
  {chapter:12, set:'ch12', term:'Invisible primary', def:'The pre-vote phase before the first contests when candidates compete in fundraising, polls, and debates to prove viability.'},
  {chapter:12, set:'ch12', term:'Unit rule', def:'Most states award all their electoral votes to the statewide popular-vote winner (Maine and Nebraska are exceptions).'},
  {chapter:12, set:'ch12', term:'Electoral votes to win', def:'270 electoral votes (a majority of 538).'},
  {chapter:12, set:'ch12', term:'Cabinet', def:'Heads of the 15 executive departments (Defense, State, etc.), appointed by the president and confirmed by the Senate.'},
  {chapter:12, set:'ch12', term:'Parliamentary system', def:'System where the chief executive (prime minister) leads the cabinet and typically commands a legislative majority.'},
  {chapter:12, set:'ch12', term:'Richard Neustadt', def:'Presidential scholar who argued real presidential power is the power to persuade; unilateral tools can signal weakness.'},

  // ch13
  {chapter:13, set:'ch13', term:'Bureaucracy', def:'Organization based on hierarchical authority, job specialization, and formalized rules.'},
  {chapter:13, set:'ch13', term:'Deepwater Horizon', def:'BP offshore drilling platform that exploded in 2010, causing a massive Gulf of Mexico oil spill.'},
  {chapter:13, set:'ch13', term:'Government corporation', def:'Agency run like a business—charges for services, has a board; receives some federal funds (e.g., Amtrak).'},
  {chapter:13, set:'ch13', term:'Regulatory agencies', def:'Agencies created for ongoing regulation of a specific economic activity; they issue rules and enforce compliance.'},
  {chapter:13, set:'ch13', term:'Independent agencies', def:'Agencies resembling cabinet departments but with narrower missions (e.g., CIA, NASA).'},
  {chapter:13, set:'ch13', term:'Presidential commissions', def:'Advisory bodies to the president; some are permanent (e.g., Commission on Civil Rights).'},
  {chapter:13, set:'ch13', term:'Merit system', def:'Hiring and promotion based on exams or specialized training, not political connections.'},
  {chapter:13, set:'ch13', term:'Spoils system', def:'Awarding government jobs to political supporters (“to the victor go the spoils”).'},
  {chapter:13, set:'ch13', term:'Patronage', def:'Filling offices with supporters of the winning party after elections.'},
  {chapter:13, set:'ch13', term:'Pendleton Act', def:'1883 law that established a federal civil-service merit system for many positions.'},
  {chapter:13, set:'ch13', term:'Budget process', def:'President proposes (via OMB); Congress authorizes and appropriates; agencies spend under oversight.'},
  {chapter:13, set:'ch13', term:'Clientele groups', def:'Beneficiaries of an agency’s programs who support and defend the agency politically.'},
  {chapter:13, set:'ch13', term:'GAO', def:'Government Accountability Office; audits spending and checks whether agencies implement laws as Congress intended.'},
  {chapter:13, set:'ch13', term:'Whistleblowing', def:'Employees reporting misconduct; protected by the Whistleblower Protection Act.'},

  // ch15
  {chapter:15, set:'ch15', term:'Laissez-faire economics', def:'View that private firms should freely make production decisions; markets guided by the profit “invisible hand.”'},
  {chapter:15, set:'ch15', term:'Adam Smith', def:'18th-century economist who argued for laissez-faire and the market’s “invisible hand” (The Wealth of Nations, 1776).'},
  {chapter:15, set:'ch15', term:'Deregulation', def:'Rolling back rules to improve efficiency; excessive deregulation can create risks, prompting new rules later.'},
  {chapter:15, set:'ch15', term:'Rachel Carson', def:'Author of Silent Spring (1962), which helped launch the environmental movement and spurred modern pollution controls.'},
  {chapter:15, set:'ch15', term:'Fiscal policy', def:'Government taxing and spending choices used to stimulate or slow the economy.'},
  {chapter:15, set:'ch15', term:'Monetary policy', def:'Managing the money supply and interest rates (via the Federal Reserve) to support growth and stable inflation.'},
  {chapter:15, set:'ch15', term:'John Maynard Keynes', def:'Economist who argued for increased government spending during downturns to boost demand and jobs.'},
  {chapter:15, set:'ch15', term:'Budget deficit', def:'When annual federal spending exceeds revenues; adds to the national debt.'},
  {chapter:15, set:'ch15', term:'National debt', def:'Total amount the federal government owes to its creditors.'},
  {chapter:15, set:'ch15', term:'Federal Reserve Act', def:'1913 law that created the Federal Reserve System and its Board of Governors.'},
  {chapter:15, set:'ch15', term:'Inflation', def:'Sustained rise in the general price level, which erodes purchasing power.'},
  {chapter:15, set:'ch15', term:'Janet Yellen', def:'Economist who served as Chair of the Federal Reserve (2014–2018).'},

  // ch16
  {chapter:16, set:'ch16', term:'Progressive tax', def:'A tax whose marginal rate rises as income rises.'},
  {chapter:16, set:'ch16', term:'Regressive tax', def:'A tax that takes a larger share of income from low-income payers than high-income payers.'},
  {chapter:16, set:'ch16', term:'Poverty line', def:'Official threshold for poverty (based historically on the cost of a thrifty food budget × 3).'},
  {chapter:16, set:'ch16', term:'AFDC', def:'Aid to Families with Dependent Children; federal cash assistance program replaced by TANF in 1996.'},
  {chapter:16, set:'ch16', term:'Means test', def:'Eligibility test requiring applicants to prove income/resources are low enough to qualify.'},
  {chapter:16, set:'ch16', term:'Entitlement program', def:'Program (e.g., Social Security, Medicare) that legally guarantees benefits to eligible individuals.'},
  {chapter:16, set:'ch16', term:'Medicare', def:'Social insurance—health coverage for retirees—funded by payroll taxes (distinct from Medicaid).'},
  {chapter:16, set:'ch16', term:'Medicaid', def:'Public assistance—government-paid health insurance—for low-income individuals and families.'},

  // ch17
  {chapter:17, set:'ch17', term:'Soft power', def:'Influence through culture, diplomacy, aid, and persuasion rather than military force.'},
  {chapter:17, set:'ch17', term:'Tariffs', def:'Taxes on imports used to raise revenue or protect domestic industries.'},
  {chapter:17, set:'ch17', term:'Isolationism', def:'Foreign policy of non-involvement in international alliances and conflicts.'},
  {chapter:17, set:'ch17', term:'Preemptive war doctrine', def:'Striking a potential adversary first when an attack is believed to be imminent.'},
  {chapter:17, set:'ch17', term:'Bipolar world structure', def:'International system dominated by two superpowers (e.g., U.S. and USSR during the Cold War).'},
  {chapter:17, set:'ch17', term:'Cold War', def:'Period of geopolitical tension (c. 1947–1991) between the U.S.-led West and the Soviet bloc.'},
  {chapter:17, set:'ch17', term:'Containment', def:'U.S. strategy to prevent the spread of Soviet influence/communism.'},
  {chapter:17, set:'ch17', term:'MAD', def:'Mutually Assured Destruction: nuclear deterrence concept where each side can inflict unacceptable damage.'}
];

const SETS = {
  ch12: BANK.filter(x=>x.set==='ch12'),
  ch13: BANK.filter(x=>x.set==='ch13'),
  ch15: BANK.filter(x=>x.set==='ch15'),
  ch16: BANK.filter(x=>x.set==='ch16'),
  ch17: BANK.filter(x=>x.set==='ch17'),
  unit3: [...BANK]
};
const SET_LABELS = { ch12:'Ch. 12', ch13:'Ch. 13', ch15:'Ch. 15', ch16:'Ch. 16', ch17:'Ch. 17', unit3:'Unit 3 (50 random)' };

// ---------- State ----------
let state = { list:[], idx:0, mode:'t2d', setKey:'unit3', misses:[], timer:null, seconds:0, missedOnly:false };
function bestKey(){ return `best_vocab_${state.setKey}_${state.mode}`; }
function startTimer(){ if(state.timer) clearInterval(state.timer); state.timer = setInterval(()=>{ state.seconds++; document.getElementById('timer').textContent = fmtTime(state.seconds); },1000); }
function stopTimer(){ if(state.timer){ clearInterval(state.timer); state.timer=null; } }

function startRound(){
  const setKey = document.getElementById('section').value; state.setKey=setKey;
  state.mode = document.getElementById('mode').value;
  const ord = document.getElementById('order').value;
  let items = [...SETS[setKey]];
  if(setKey==='unit3') items = shuffle(items).slice(0,50);
  if(ord==='shuf') items = shuffle(items);
  state.list = items.map(x=>({...x}));
  state.idx = 0; state.misses = []; state.seconds = 0; state.missedOnly = false; startTimer();
  document.getElementById('start').classList.add('hidden');
  document.getElementById('result').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  document.getElementById('setTag').textContent = SET_LABELS[state.setKey];
  document.getElementById('modeTag').textContent = (state.mode==='t2d'?'Term → Definition':'Definition → Term');
  document.getElementById('best').textContent = 'Best: ' + getBest(bestKey());
  renderQ();
}

function buildChoices(item){
  const correct = (state.mode==='t2d') ? item.def : item.term;
  const pool = state.list; // distractors from chosen set
  const distractors = [];
  while(distractors.length<3 && distractors.length < pool.length-1){
    const cand = pool[Math.floor(Math.random()*pool.length)];
    if(cand===item) continue;
    const text = (state.mode==='t2d') ? cand.def : cand.term;
    if(!distractors.includes(text)) distractors.push(text);
  }
  return shuffle([{text:correct, correct:true}, ...distractors.map(t=>({text:t, correct:false}))]);
}

function renderQ(){
  const q = state.list[state.idx];
  document.getElementById('progress').textContent = `Q ${state.idx+1} / ${state.list.length}`;
  document.getElementById('prompt').textContent = (state.mode==='t2d') ? q.term : q.def;
  const choices = buildChoices(q);
  const box = document.getElementById('choices'); box.innerHTML='';
  choices.forEach(c=>{
    const btn = document.createElement('button');
    btn.className='tile';
    const inner = document.createElement('div'); inner.className='inner'; inner.textContent=c.text; btn.appendChild(inner);
    btn.addEventListener('click', ()=> pick(c.correct, btn, q));
    box.appendChild(btn);
  });
}

function pick(isCorrect, node, item){
  node.classList.add(isCorrect? 'correct' : 'wrong');
  if(!isCorrect){ state.misses.push(item); }
  setTimeout(()=>{
    if(state.idx < state.list.length-1){ state.idx++; renderQ(); }
    else { finish(); }
  }, 550);
}

function finish(){
  stopTimer();
  const total = state.list.length; const missed = state.misses.length; const correct = total - missed;
  if(!state.missedOnly){ setBest(bestKey(), state.seconds); }
  document.getElementById('quiz').classList.add('hidden');
  document.getElementById('result').classList.remove('hidden');
  document.getElementById('scoreline').textContent = `Score: ${correct} / ${total} (${Math.round(correct/total*100)}%)`;
  document.getElementById('timeline').textContent = `Time: ${fmtTime(state.seconds)}`;
  document.getElementById('bestline').textContent = `Best: ${getBest(bestKey())}`;

  const rev = document.getElementById('review'); rev.innerHTML='';
  if(missed===0){
    rev.innerHTML = '<p class="muted">Perfect! No missed items to review.</p>';
  } else {
    const list = document.createElement('div'); list.className='grid'; list.style.gridTemplateColumns='1fr'; list.style.gap='10px';
    state.misses.forEach((m,i)=>{
      const row = document.createElement('div'); row.className='card'; row.style.padding='12px';
      const ans =   (state.mode==='t2d')? m.def  : m.term;
      row.innerHTML = `<div style="font-weight:700; margin-bottom:6px">Missed ${i+1} · Ch. ${m.chapter}</div>`+
                      `<div style="margin-bottom:6px">${(state.mode==='t2d')? m.term : m.def}</div>`+
                      `<div class="pill" style="display:inline-block">Correct: ${ans}</div>`;
      list.appendChild(row);
    });
    rev.appendChild(list);
  }
}

function startRoundMissed(){
  if(!state.misses || state.misses.length===0){ alert('No missed items to retry.'); return; }
  const items = state.misses.map(m=>m);
  state.list = shuffle(items);
  state.idx = 0;
  state.seconds = 0;
  state.missedOnly = true;
  state.misses = [];
  startTimer();
  document.getElementById('result').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  document.getElementById('setTag').textContent = SET_LABELS[state.setKey] + ' — Missed Only';
  document.getElementById('modeTag').textContent = (state.mode==='t2d'?'Term → Definition':'Definition → Term');
  document.getElementById('best').textContent = 'Best: ' + getBest(bestKey());
  renderQ();
}

// nav
 document.getElementById('begin').addEventListener('click', startRound);
 document.getElementById('retry').addEventListener('click', startRound);
 document.getElementById('retryMissed').addEventListener('click', startRoundMissed);
 document.getElementById('restart').addEventListener('click', ()=>{
   document.getElementById('result').classList.add('hidden');
   document.getElementById('start').classList.remove('hidden');
 });
</script>
</body>
</html>
