<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chapter 1 – Fill-in-the-Blank (40 Random, Aligned to MC)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 900px; margin: auto; }
    h2 { margin-top: 0; }
    .question { margin-bottom: 16px; }
    .question label { display: block; font-weight: bold; margin-bottom: 6px; }
    .question textarea { width: 100%; padding: 8px; font-size: 15px; }
    #submitBtn, #retakeBtn { padding: 10px 16px; font-size: 16px; margin-top: 16px; }
    .result { margin-bottom: 16px; }
    .result .correct { color: green; font-weight: bold; }
    .result .user { color: #333; }
    .muted { color: #666; font-size: 0.95em; }
    .controls { display: flex; gap: 10px; margin-top: 16px; flex-wrap: wrap; }
    .note { background: #f6f8fa; border: 1px solid #e2e8f0; padding: 10px; border-radius: 6px; margin-bottom: 16px; }
  </style>
</head>
<body>
  <h2>Chapter 1 – Fill-in-the-Blank (40 Random, Aligned to Multiple Choice)</h2>
  <div class="note">
    This version draws 40 random items from the fill-in bank that <strong>match topics present</strong> in the multiple-choice quiz. Note: Only 34 fill-in items aligned to MC topics; the remainder will include non-aligned items to reach 40.
  </div>
  <p class="muted">Type your answers. On submit, the page will show <em>your answer</em> next to the <em>correct answer</em> so you can self-grade.</p>
  <div id="quizContainer"></div>
  <div class="controls">
    <button id="submitBtn">Submit</button>
    <button id="printBtn" style="display:none">Print Results</button>
    <button id="retakeBtn" style="display:none">Retake (New Random 40)</button>
  </div>

<script>
(function(){
  function esc(s){ return String(s).replace(/[&<>"']/g, function(m){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m];}); }

  // Embedded ALIGNED item bank (prioritized to MC topics)
  var fullBank = [{"q": "State Harold Lasswell’s famous definition of politics.", "a": "Who gets what, when, and how."}, {"q": "Name the primary author of the Declaration of Independence.", "a": "Thomas Jefferson."}, {"q": "Say what the Declaration of Independence declared.", "a": "Independence from Great Britain and a justification for revolution."}, {"q": "Identify the philosopher who most influenced the Declaration.", "a": "John Locke."}, {"q": "List the three core values emphasized in the Declaration.", "a": "Liberty, equality, and self‑government."}, {"q": "Name the leader of Shays’ Rebellion.", "a": "Daniel Shays."}, {"q": "State what triggered Shays’ Rebellion.", "a": "Debt, foreclosures, and high taxes after the Revolution."}, {"q": "Explain what weakness the rebellion revealed.", "a": "Weaknesses of the Articles of Confederation in maintaining order."}, {"q": "Give one long‑term result of Shays’ Rebellion.", "a": "Momentum toward the Constitutional Convention."}, {"q": "What were the Articles of Confederation?", "a": "America’s first governing document."}, {"q": "Where and when did the Constitutional Convention meet?", "a": "Philadelphia in 1787."}, {"q": "What was the original purpose of the Convention?", "a": "To revise the Articles of Confederation."}, {"q": "What compromise resolved the dispute over representation?", "a": "The Great Compromise."}, {"q": "Name two structural features included in the Constitution.", "a": "Separation of powers and checks and balances."}, {"q": "Who proposed the Virginia Plan?", "a": "James Madison."}, {"q": "What kind of legislature did the Virginia Plan support?", "a": "A bicameral legislature based on population."}, {"q": "Which level of authority did the Virginia Plan favor?", "a": "Strong national authority."}, {"q": "What key design principle did the Virginia Plan introduce?", "a": "Separation of powers into three branches."}, {"q": "What did the Virginia Plan become for the final Constitution?", "a": "A basis for the final Constitution."}, {"q": "Who proposed the New Jersey Plan?", "a": "William Paterson."}, {"q": "What type of representation did the New Jersey Plan favor?", "a": "Equal representation for each state in Congress."}, {"q": "What kind of legislature did the New Jersey Plan propose?", "a": "A unicameral legislature."}, {"q": "Did the New Jersey Plan replace or strengthen the Articles?", "a": "Strengthen, not replace, the Articles."}, {"q": "How did the New Jersey Plan influence the final Constitution?", "a": "It was rejected, but influenced the Great Compromise."}, {"q": "Define concurrent powers.", "a": "Powers shared by both state and federal governments."}, {"q": "Give two examples of concurrent powers.", "a": "Taxation, law enforcement, and establishing courts."}, {"q": "Explain what concurrent powers allow for.", "a": "Cooperation between levels of government."}, {"q": "How are conflicts over concurrent powers resolved?", "a": "By the courts."}, {"q": "What principle do concurrent powers reflect?", "a": "The federal principle of shared sovereignty."}, {"q": "Define reserved powers.", "a": "Powers not granted to the federal government, reserved to the states."}, {"q": "Give two examples of reserved powers.", "a": "Education, local elections, and intrastate commerce."}, {"q": "What do reserved powers ensure?", "a": "State sovereignty within the federal system."}, {"q": "What do reserved powers provide for the states?", "a": "Flexibility for state‑level policies."}, {"q": "What balance do reserved powers help maintain?", "a": "Power between national and state governments."}, {"q": "Define politics in one sentence.", "a": "The process of resolving conflicts over values and resources."}, {"q": "Describe what politics often includes regarding government decision‑making.", "a": "The struggle for influence over government decision‑making."}, {"q": "Name the two modes politics usually involves.", "a": "Compromise and competition."}, {"q": "Explain why politics is necessary.", "a": "People have differing priorities and beliefs."}, {"q": "Describe the role the Declaration served for American government.", "a": "A moral and political blueprint for American government."}, {"q": "Say why the rebellion alarmed national leaders.", "a": "It showed the need for a stronger national government."}];

  var MAX_ITEMS = 40;
  var current = [];

  function shuffle(arr){
    for (var i = arr.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var t = arr[i]; arr[i] = arr[j]; arr[j] = t;
    }
  }

  function drawRandom(){ 
    var copy = fullBank.slice();
    shuffle(copy);
    return copy.slice(0, Math.min(MAX_ITEMS, copy.length));
  }

  function render(){
    var container = document.getElementById('quizContainer');
    container.innerHTML = '';
    current = drawRandom();

    current.forEach(function(it, idx){
      var q = document.createElement('div');
      q.className = 'question';
      var id = 'q' + idx;
      q.innerHTML = '<label for="'+id+'">'+esc((idx+1)+'. '+it.q)+'</label>' +
                    '<textarea id="'+id+'" rows="2" placeholder="Type your answer..."></textarea>';
      container.appendChild(q);
    });
  }

  function onSubmit(){
    var container = document.getElementById('quizContainer');
    var results = document.createElement('div');
    results.innerHTML = '<h3>Results</h3><p class="muted">Compare your answer with the correct answer below. Self-grade as needed.</p>';

    current.forEach(function(it, idx){
      var val = (document.getElementById('q'+idx).value || '').trim();
      var r = document.createElement('div');
      r.className = 'result';
      r.innerHTML = '<div><strong>'+esc((idx+1)+'. '+it.q)+'</strong></div>' +
                    '<div class="user">Your answer: ' + (val ? esc(val) : '<em>(blank)</em>') + '</div>' +
                    '<div class="correct">Correct answer: ' + esc(it.a) + '</div>';
      results.appendChild(r);
    });
    container.innerHTML = '';
    container.appendChild(results);

    document.getElementById('submitBtn').style.display = 'none';
    var pb = document.getElementById('printBtn');
    pb.style.display = 'inline-block';
    pb.onclick = function(){ window.print(); };

    var rb = document.getElementById('retakeBtn');
    rb.style.display = 'inline-block';
    rb.onclick = function(){
      // reset UI
      document.getElementById('submitBtn').style.display = 'inline-block';
      pb.style.display = 'none';
      rb.style.display = 'none';
      render();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    };
  }

  document.addEventListener('DOMContentLoaded', function(){
    render();
    document.getElementById('submitBtn').addEventListener('click', onSubmit);
  });
})();
</script>
</body>
</html>
